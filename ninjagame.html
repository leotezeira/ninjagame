<!DOCTYPE html>

<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>ğŸ¥ Ninja RPG - Estilo Naruto</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="game-container">
        <h1>ğŸ¥ NINJA RPG ğŸ¥</h1>

    <!-- Autenticacion -->
    <div id="auth-screen" class="screen active">
        <div class="story-text">
            <h2>ğŸ” Acceso Ninja</h2>
            <p>Registra tu personaje unico o inicia sesion para continuar.</p>
        </div>
        <div class="player-info auth-box" style="max-width: 560px; margin: 0 auto; border-top: none;">
            <label for="auth-username" style="display:block; margin-bottom: 10px; color:#ff8c00; font-weight: bold; text-transform: uppercase; font-size: 0.85em; letter-spacing: 0.5px;">Nombre de personaje</label>
            <input id="auth-username" class="text-input" type="text" maxlength="20" placeholder="Ej: Kenji Uzumaki" autocomplete="off" />
            <label for="auth-password" style="display:block; margin: 14px 0 10px; color:#ff8c00; font-weight: bold; text-transform: uppercase; font-size: 0.85em; letter-spacing: 0.5px;">Contrasena</label>
            <input id="auth-password" class="text-input" type="password" maxlength="32" placeholder="Minimo 6 caracteres" autocomplete="off" />
            <div id="auth-error" style="margin-top: 12px; color:#ff7f66; display: none;"></div>
            <div class="auth-actions">
                <button class="btn" id="auth-register-btn">Registrar</button>
                <button class="btn btn-secondary" id="auth-login-btn">Iniciar Sesion</button>
            </div>
        </div>
    </div>

    <!-- Nombre del Ninja -->
    <div id="name-screen" class="screen">
        <div class="story-text">
            <h2>ğŸ¥· Crea tu Ninja</h2>
            <p id="name-screen-hint">Elige el nombre que sera recordado en el mundo ninja.</p>
        </div>
        <div class="player-info" style="max-width: 560px; margin: 0 auto; border-top: none;">
            <label for="player-name-input" style="display:block; margin-bottom: 12px; color:#ff8c00; font-weight: bold; text-transform: uppercase; font-size: 0.9em; letter-spacing: 0.5px;">Tu Nombre Ninja</label>
            <input id="player-name-input" class="text-input" type="text" maxlength="20" placeholder="Ej: Kenji Uzumaki..." autocomplete="off" />
            <div id="name-error" style="margin-top: 12px; color:#ff7f66; display: none;"></div>
            <div style="text-align:center; margin-top: 20px; display: flex; gap: 12px; justify-content: center;">
                <button class="btn" onclick="game.validateAndSaveName()">Continuar</button>
            </div>
        </div>
    </div>

    <!-- SelecciÃ³n de Clan -->
    <div id="clan-screen" class="screen">
        <div style="text-align: center; margin-bottom: 28px;">
            <div style="font-size: 3em; opacity: 0.15; margin-bottom: 8px;">å¿</div>
            <h2 style="color: #ff8c00; margin: 0; font-size: 1.3em;">Elige Tu Clan</h2>
        </div>
        <div class="clan-select" id="clan-select"></div>
    </div>

    <!-- SelecciÃ³n de Aldea -->
    <div id="village-select-screen" class="screen">
        <div style="text-align: center; margin-bottom: 28px;">
            <div style="font-size: 3em; opacity: 0.15; margin-bottom: 8px;">ğŸ˜ï¸</div>
            <h2 style="color: #ff8c00; margin: 0; font-size: 1.3em;">Elige Tu Aldea Natal</h2>
        </div>
        <div class="village-select" id="village-select"></div>
    </div>

    <!-- Sorteo de Kekkei Genkai -->
    <div id="kekkei-screen" class="screen">
        <div class="kekkei-genkai-notification" id="kekkei-result">
            <h2>ğŸŒŸ Realizando Sorteo de Kekkei Genkai... ğŸŒŸ</h2>
        </div>
        <div style="text-align: center; margin-top: 32px;">
            <button class="btn" id="kekkei-continue-btn" onclick="game.finishCharacterCreation()" disabled style="opacity: 0.4; cursor: not-allowed;">Continuar</button>
        </div>
    </div>

    <!-- Pantalla de Briefing de MisiÃ³n -->
    <div id="mission-briefing-screen" class="screen">
        <div class="mission-briefing-overlay">
            <div class="mission-briefing-content">
                <h2 id="briefing-title">MisiÃ³n</h2>
                <div class="briefing-narrator">
                    <p id="briefing-narrator-text"></p>
                </div>
                <div class="briefing-details">
                    <div class="briefing-stat"><span>ğŸ–ï¸ Rango:</span> <span id="briefing-rank">D</span></div>
                    <div class="briefing-stat"><span>ğŸ’° Recompensa:</span> <span id="briefing-ryo">0</span> ryos</div>
                    <div class="briefing-stat"><span>âœ¨ Experiencia:</span> <span id="briefing-exp">0</span> exp</div>
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn" onclick="game.acceptMissionFromBriefing()">âœ… Aceptar MisiÃ³n</button>
                    <button class="btn btn-secondary" onclick="game.cancelMissionBriefing()">âŒ Rechazar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Pantalla Principal (Aldea) -->
    <div id="village-screen" class="screen">
        <!-- ğŸ  SECCIÃ“N INICIO -->
        <div id="section-home" class="section-content active">
            <div class="player-info">
                <h2 id="player-name-village">Ninja</h2>
                <div class="player-info-clan" id="player-clan-village"></div>
                <div id="village-info"></div>
                
                <div class="player-bars">
                    <div class="bar-container">
                        <div class="bar-label">
                            <span>â¤ï¸ Salud</span>
                            <span id="village-health-text">100/100</span>
                        </div>
                        <div class="health-bar">
                            <div class="health-fill" id="village-health-bar" style="width: 100%;"></div>
                        </div>
                    </div>
                    <div class="bar-container">
                        <div class="bar-label">
                            <span>ğŸ’™ Chakra</span>
                            <span id="village-chakra-text">100/100</span>
                        </div>
                        <div class="chakra-bar">
                            <div class="chakra-fill" id="village-chakra-bar" style="width: 100%;"></div>
                        </div>
                    </div>
                </div>

                <div class="info-grid">
                    <div class="info-item"><span>ğŸ¥·</span><span>Rango: <span id="player-rank">Genin</span></span></div>
                    <div class="info-item"><span>â­</span><span>Nivel: <span id="player-level-village">1</span></span></div>
                    <div class="info-item"><span>ğŸ’°</span><span>Ryo: <span id="player-ryo">100</span></span></div>
                    <div class="info-item"><span>âœ¨</span><span>EXP: <span id="player-exp-village">0/100</span></span></div>
                </div>

                <div id="kekkei-display" style="margin-top: 14px;"></div>
                <div id="element-display" style="margin-top: 8px; text-align: center;"></div>
            </div>

            <div id="exam-widget"></div>

            <div id="village-online" class="online-panel">
                <div class="online-header">
                    <span>ğŸŸ¢ En linea en tu aldea</span>
                    <span id="village-online-count">0</span>
                </div>
                <div id="village-online-list" class="online-list"></div>
            </div>

            <div style="display: flex; gap: 10px; margin-top: 16px;">
                <button class="btn-small btn-secondary" onclick="game.saveGame()" style="flex: 1;">ğŸ’¾ Guardar</button>
                <button class="btn-small" onclick="game.sleepInVillage()" style="flex: 1;">ğŸ’¤ Dormir</button>
            </div>
        </div>

        <!-- ğŸ—ºï¸ SECCIÃ“N MUNDO -->
        <div id="section-world" class="section-content">
            <h3 style="color: #ff8c00; text-align: center; margin-bottom: 20px;">ğŸ—ºï¸ Mundo Ninja</h3>
            <div id="world-hud-display" style="margin-bottom: 20px;"></div>
            
            <div class="tabs">
                <button class="tab-btn active" onclick="game.showTab('missions')">ğŸ“œ Misiones</button>
                <button class="tab-btn" onclick="game.showTab('npcs')">ğŸ§‘â€ğŸ¤â€ğŸ§‘ NPCs</button>
            </div>

            <div id="missions-tab" class="tab-content active">
                <h3 style="color: #ff8c00;">Misiones Disponibles</h3>
                <div class="mission-list" id="mission-list"></div>
            </div>

            <div id="npcs-tab" class="tab-content">
                <h3 style="color: #ff8c00;">ğŸ§‘â€ğŸ¤â€ğŸ§‘ NPCs</h3>
                <p style="margin: 10px 0;">Conoce personajes, mejora relaciones, recibe misiones y entrenamientos Ãºnicos.</p>
                <div id="npc-list" class="npc-list"></div>

                <div id="npc-modal" class="npc-modal" style="display:none;"></div>
            </div>
        </div>

        <!-- ğŸ’ SECCIÃ“N INVENTARIO/ACADEMIA -->
        <div id="section-inventory" class="section-content">
            <h3 style="color: #ff8c00; text-align: center; margin-bottom: 20px;">ğŸ’ Academia & Entrenamiento</h3>

            <div id="academy-tab">
            <div class="academy-header">
                <h3>ğŸ“ Academia Ninja</h3>
                <p>Aprende nuevos jutsus pagando con Ryo. Los jutsus mÃ¡s poderosos requieren un rango ninja mÃ¡s alto.</p>
            </div>
            
            <!-- SECCIÃ“N: JUTSUS POR RANGO -->
            <div class="academy-section">
                <div class="section-title">
                    <span class="section-icon">ğŸ“Š</span>
                    <h4>Jutsus por Rango</h4>
                </div>
                <div class="tabs tabs-inline">
                    <button class="tab-btn active" onclick="game.showJutsuRank('genin')">Genin</button>
                    <button class="tab-btn" onclick="game.showJutsuRank('chunin')">Chunin</button>
                    <button class="tab-btn" onclick="game.showJutsuRank('jonin')">Jonin</button>
                    <button class="tab-btn" onclick="game.showJutsuRank('master')">Maestros</button>
                </div>
            </div>

            <!-- SECCIÃ“N: ESPECIALIDADES -->
            <div class="academy-section">
                <div class="section-title">
                    <span class="section-icon">âš”ï¸</span>
                    <h4>Especialidades</h4>
                </div>
                <div class="tabs tabs-inline">
                    <button class="tab-btn" onclick="game.showJutsuRank('taijutsu')">ğŸ¥‹ Taijutsu</button>
                    <button class="tab-btn" onclick="game.showJutsuRank('genjutsu')">ğŸ­ Genjutsu</button>
                    <button class="tab-btn" onclick="game.showJutsuRank('escape')">ğŸƒ Escape</button>
                </div>
            </div>

            <!-- SECCIÃ“N: ELEMENTOS -->
            <div class="academy-section">
                <div class="section-title">
                    <span class="section-icon">ğŸŒ€</span>
                    <h4>Elementos Chakra</h4>
                </div>
                <div class="tabs tabs-inline">
                    <button class="tab-btn" onclick="game.showJutsuRank('katon')">ğŸ”¥ Katon</button>
                    <button class="tab-btn" onclick="game.showJutsuRank('suiton')">ğŸ’§ Suiton</button>
                    <button class="tab-btn" onclick="game.showJutsuRank('futon')">ğŸŒªï¸ Futon</button>
                    <button class="tab-btn" onclick="game.showJutsuRank('doton')">â›°ï¸ Doton</button>
                    <button class="tab-btn" onclick="game.showJutsuRank('raiton')">âš¡ Raiton</button>
                </div>
            </div>

            <!-- SECCIÃ“N: KEKKEI GENKAI -->
            <div class="academy-section">
                <div class="section-title">
                    <span class="section-icon">âœ¨</span>
                    <h4>Kekkei Genkai</h4>
                </div>
                <div class="tabs tabs-inline">
                    <button class="tab-btn" onclick="game.showJutsuRank('sharingan')">ğŸ‘ï¸ Sharingan</button>
                    <button class="tab-btn" onclick="game.showJutsuRank('byakugan')">ğŸ”® Byakugan</button>
                    <button class="tab-btn" onclick="game.showJutsuRank('rinnegan')">ğŸŒ€ Rinnegan</button>
                    <button class="tab-btn" onclick="game.showJutsuRank('bijuu')">ğŸ¦Š Bijuu</button>
                </div>
            </div>

            <div class="academy-jutsus-container">
                <div class="jutsu-academy-list" id="academy-jutsu-list"></div>
            </div>

            <div style="margin-top: 30px; padding-top: 20px; border-top: 2px solid rgba(255,140,0,0.3);">
                <h3 style="color: #ff8c00; margin-bottom: 15px;">ğŸ’ª Centro de Entrenamiento</h3>
                <div class="shop-grid" id="training-list"></div>
            </div>
        </div>

        <!-- ğŸª SECCIÃ“N TIENDA -->
        <div id="section-shop" class="section-content">
            <h3 style="color: #ff8c00; text-align: center; margin-bottom: 20px;">ğŸª Tienda de la Aldea</h3>
            <div style="text-align: center; margin-bottom: 15px;">
                <span style="font-size: 1.2em;">ğŸ’° Tus Ryo: <span id="shop-ryo-display" style="color: #ffd700;">0</span></span>
            </div>
            <div class="shop-grid" id="shop-list"></div>
        </div>

        <!-- âš™ï¸ SECCIÃ“N STATS -->
        <div id="section-statspage" class="section-content">
            <h3 style="color: #ff8c00; text-align: center; margin-bottom: 20px;">ğŸ“Š EstadÃ­sticas & ConfiguraciÃ³n</h3>
            <div id="stats-display"></div>
        </div>
    </div>

    <!-- BARRA DE NAVEGACIÃ“N INFERIOR (siempre visible excepto en combate) -->
    <nav id="bottom-nav">
        <button class="nav-btn active" data-tab="home" onclick="game.showSection('home')">ğŸ <span>Inicio</span></button>
        <button class="nav-btn" data-tab="world" onclick="game.showSection('world')">ğŸ—ºï¸<span>Mundo</span></button>
        <button class="nav-btn" data-tab="inventory" onclick="game.showSection('inventory')">ğŸ’<span>Inventario</span></button>
        <button class="nav-btn" data-tab="shop" onclick="game.showSection('shop')">ğŸª<span>Tienda</span></button>
        <button class="nav-btn" data-tab="statspage" onclick="game.showSection('statspage')">âš™ï¸<span>Stats</span></button>
    </nav>

    <!-- Combate -->
    <div id="combat-screen" class="screen">
        <div class="player-info">
            <h3 id="combat-player-name">Tu Ninja</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <div>
                    <div class="health-bar">
                        <div class="health-fill" id="combat-player-health-bar"></div>
                        <div class="bar-text" id="combat-player-health-text">HP: 100/100</div>
                    </div>
                </div>
                <div>
                    <div class="chakra-bar">
                        <div class="chakra-fill" id="combat-player-chakra-bar"></div>
                        <div class="bar-text" id="combat-player-chakra-text">Chakra: 100/100</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="combat-area">
            <div class="enemy-info">
                <h3 id="enemy-name">Enemigo</h3>
                <div class="health-bar">
                    <div class="health-fill" id="enemy-health-bar" style="background: linear-gradient(90deg, #8b0000 0%, #660000 100%);"></div>
                    <div class="bar-text" id="enemy-health-text">HP: 50/50</div>
                </div>
                <p id="enemy-stats"></p>
            </div>

            <div class="combat-log" id="combat-log"></div>

            <div style="text-align: center; margin-top: 15px;">
                <button class="btn btn-small" onclick="game.basicAttack()" id="attack-btn">âš”ï¸ Taijutsu</button>
                <button class="btn btn-small" onclick="game.toggleJutsuMenu()" id="jutsu-menu-btn">ğŸŒ€ Ninjutsu</button>
                <button class="btn btn-small" onclick="game.useGenjutsu()" id="genjutsu-btn">ğŸ‘ï¸ Genjutsu</button>
                <button class="btn btn-small" onclick="game.defend()" id="defend-btn">ğŸ›¡ï¸ Defender</button>
                <button class="btn btn-small" onclick="game.useKawarimi()" id="kawarimi-btn">ğŸ’¨ Kawarimi</button>
                <button class="btn btn-small" onclick="game.showInventoryInCombat()" id="item-btn">ğŸ’ Items</button>
            </div>

            <div id="jutsu-selection" style="display: none; margin-top: 15px;">
                <h4 style="color: #3498db;">Selecciona un Jutsu:</h4>
                <div class="jutsu-quick-bar">
                    <div class="jutsu-quick-header">
                        <span>âš¡ Accesos rapidos (5)</span>
                        <span id="quick-jutsu-hint">Selecciona un slot y asigna abajo</span>
                    </div>
                    <div id="quick-jutsu-slots" class="jutsu-quick-slots"></div>
                </div>
                <div class="jutsu-grid" id="jutsu-list"></div>
            </div>

            <div id="combat-inventory" style="display: none; margin-top: 15px;">
                <h4 style="color: #2ecc71;">Items Disponibles:</h4>
                <div id="combat-items-list"></div>
            </div>
        </div>
    </div>

    <!-- Victoria de MisiÃ³n -->
    <div id="mission-victory-screen" class="screen">
        <div class="victory">
            <h2>ğŸ‰ Â¡MISIÃ“N COMPLETADA! ğŸ‰</h2>
            <p id="mission-victory-text"></p>
            <div id="kekkei-exp-gain" style="margin-top: 15px;"></div>
            <button class="btn" onclick="game.returnToVillage()">Regresar a la Aldea</button>
        </div>
    </div>

    <!-- Derrota -->
    <div id="defeat-screen" class="screen">
        <div class="defeat">
            <h2>ğŸ’€ HAS CAÃDO EN BATALLA ğŸ’€</h2>
            <p>El camino del ninja es difÃ­cil...</p>
            <p style="margin-top: 15px;">Tu personaje ha muerto. Debes crear uno nuevo.</p>
            <button class="btn" onclick="game.deleteCharacterAndRestart()">Crear Nuevo Personaje</button>
        </div>
    </div>

    <!-- ExÃ¡menes -->
    <div id="exam-screen" class="screen">
        <div class="player-info" style="border-color: rgba(255, 215, 0, 0.55);">
            <h2 style="color:#ffd700;">ğŸ¯ Examen Ninja</h2>
            <div id="exam-content"></div>
            <div style="text-align:center; margin-top: 14px;">
                <button class="btn btn-secondary" onclick="game.abandonExam()">Abandonar</button>
            </div>
        </div>
    </div>
</div>

<script type="module" src="js/main.js"></script>
</body>
</html>